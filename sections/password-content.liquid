{{ 'forms.css' | asset_url | stylesheet_tag }}

{{ 'template-password.css' | asset_url | stylesheet_tag }}

<!-- Password Content Section -->
<section class='template-password-screen color-{{ section.settings.color_scheme }}'>
  <div class='template-password-screen_bg'>
    {%- if section.settings.bg_image != blank -%}
      <img
        srcset='
          {%- if section.settings.bg_image_mobile != blank -%}
            {{ section.settings.bg_image_mobile | image_url: width: 375 }} 375w,
            {{ section.settings.bg_image_mobile | image_url: width: 550 }} 550w,
            {{ section.settings.bg_image_mobile | image_url: width: 800 }} 800w,
          {%- endif -%}
          {{ section.settings.bg_image | image_url: width: 1000 }} 1000w,
          {{ section.settings.bg_image | image_url: width: 1400 }} 1400w,
          {{ section.settings.bg_image | image_url: width: 1800 }} 1800w
        '
        sizes='
          (max-width: 375px) 375px,
          (max-width: 550px) 550px,
          (max-width: 767px) 800px,
          (max-width: 1000px) 1000px,
          (max-width: 1400px) 1400px,
          1800px
        '
        src='{{ section.settings.bg_image | image_url: width: 1400 }}'
        alt='{{ section.settings.bg_image.alt | escape }}'
        width='100%'
        height='100%'
        loading='lazy'
      >
    {%- endif -%}
  </div>

  <div class='template-password-screen__container container-main section-padding-main'>
    {% unless shop.password_message == blank %}
      <div class='template-password-screen__message'>
        {{ shop.password_message }}
      </div>
    {% endunless %}

    {% if section.settings.newsletter_enable %}
      <div class='template-password-screen__newsletter'>
        <h2 class='template-password-screen__heading headline-style-h3'>
          {{ section.settings.newsletter_form_heading | escape }}
        </h2>
        {% if section.settings.newsletter_form_subheading != blank %}
          <div class='template-password-screen__subheading rte'>
            {{ section.settings.newsletter_form_subheading }}
          </div>
        {% endif %}

        <div class='klaviyo-form-{{ section.settings.klaviyo_form_id }}'></div>

        {% comment %}
          {% form 'customer',
            id: 'ContactPassword',
            class: 'template-password-screen__form form-single-field'
          %}
            {%- assign form_id = 'PasswordNewsletterForm' -%}
            <input
              type='hidden'
              name='contact[tags]'
              value='prospect, password page'
            >

            <label for='{{ form_id }}-email' class='visually-hidden'>
              {{- 'newsletter.label' | t -}}
            </label>

            {%- if form.posted_successfully? -%}
              <div
                class='template-password__message template-password__message--success'
                tabindex='-1'
                data-form-status
              >
                {{ 'newsletter.success' | t }}
              </div>
            {%- endif -%}

            <div class='template-password__input-group{% if form.errors %} template-password__input-group--error{% endif %}'>
              <input
                type='email'
                name='contact[email]'
                id='{{ form_id }}-email'
                class='template-password__input{% if form.errors contains 'email' %} template-password__input--error{% endif %}'
                placeholder='{{ section.settings.newsletter_placeholder | escape }}'
                {%- if form.errors contains 'email' -%}
                  aria-invalid='true'
                  aria-describedby='{{ form_id }}-email-error'
                  data-form-status
                {%- endif -%}
              >
              <button
                type='submit'
                name='commit'
                class='template-password__button button button--primary'
              >
                {{ section.settings.newsletter_button_text | escape }}
              </button>
            </div>

            {%- if form.errors contains 'email' -%}
              <div
                id='{{ form_id }}-email-error'
                class='template-password__error'
              >
                <span class='visually-hidden'>
                  {{- 'accessibility.error' | t }}
                </span>
                {% render 'icon-error' %}
                <span>
                  {{- form.errors.translated_fields.email | capitalize }}
                  {{ form.errors.messages.email }}.
                </span>
              </div>
            {%- endif -%}
          {% endform %}
        {% endcomment %}
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Password Content",
  "settings": [
    {
      "type": "header",
      "content": "Newsletter Signup"
    },
    {
      "type": "checkbox",
      "id": "newsletter_enable",
      "label": "Show newsletter signup",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "image_picker",
      "id": "bg_image",
      "label": "Newsletter image"
    },
    {
      "type": "image_picker",
      "id": "bg_image_mobile",
      "label": "Newsletter image mobile"
    },
    {
      "type": "text",
      "id": "newsletter_form_heading",
      "label": "Newsletter form heading",
      "default": "Be the first to know when we launch."
    },
    {
      "type": "richtext",
      "id": "newsletter_form_subheading",
      "label": "Subheading",
      "default": "<p>Promotions, new products and sales. Directly to your inbox.</p>"
    },
    {
      "type": "richtext",
      "id": "form_subline_text",
      "label": "Form Subline Text",
      "default": "<p>Calling creators</p>"
    },
    {
      "type": "text",
      "id": "klaviyo_form_id",
      "label": "Klaviyo Form ID",
      "info": "Add the Klaviyo form ID to the newsletter form",
      "default": "UQJuZt"
    }
  ],
  "presets": [
    {
      "name": "Password Content",
      "category": "Templates & Pages"
    }
  ]
}
{% endschema %}
